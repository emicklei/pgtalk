package categories

// generated by pgtalk-gen on 2021-08-23 17:30:49.413544 &#43;0200 CEST m=&#43;0.025042672
// DO NOT EDIT

import (
	"bytes"
	"fmt"
	"github.com/emicklei/pgtalk"
	"time"
)

var (
	_         = time.Now()
	tableInfo = pgtalk.TableInfo{Schema: "public", Name: "categories", Alias: "c1"}
)

type Category struct {
	ID    *int64  // bigint
	Title *string // text
}

var (
	ID = pgtalk.NewInt64Access(pgtalk.MakeColumnInfo(tableInfo, "id", true, true, 1),
		func(dest interface{}, v *int64) { dest.(*Category).ID = v })
	Title = pgtalk.NewTextAccess(pgtalk.MakeColumnInfo(tableInfo, "title", false, false, 2),
		func(dest interface{}, v *string) { dest.(*Category).Title = v })
	tableAccess = pgtalk.TableAccessor{TableInfo: tableInfo,
		Factory: func() interface{} { return new(Category) }, AllColumns: []pgtalk.ColumnAccessor{ID, Title}}
)

// ColumnUpdatesFrom returns the list of changes to a Category for which updates need to be processed.
// Cannot be used to set null values for columns.
func ColumnUpdatesFrom(e *Category) (list []pgtalk.SQLExpression) {
	if e.ID != nil {
		list = append(list, ID.Set(*e.ID))
	}
	if e.Title != nil {
		list = append(list, Title.Set(*e.Title))
	}
	return
}

// Next returns the next *Category from the iterator data.
// Use err to check for failure.
func Next(it *pgtalk.ResultIterator) (e *Category, err error) {
	var each = new(Category)
	// first check for query error in case caller forgot
	if err = it.Err(); err != nil {
		return nil, err
	}
	err = it.Next(each)
	return each, err
}

// String returns the debug string for *Category with all non-nil field values.
func (e *Category) String() string {
	b := new(bytes.Buffer)
	fmt.Fprint(b, "categories.Category{")
	if e.ID != nil {
		fmt.Fprintf(b, "ID:%v ", *e.ID)
	}
	if e.Title != nil {
		fmt.Fprintf(b, "Title:%v ", *e.Title)
	}
	fmt.Fprint(b, "}")
	return b.String()
}

// AllColumns returns the list of all column accessors for usage in e.g. Select.
func AllColumns() []pgtalk.ColumnAccessor {
	return tableAccess.AllColumns
}

// Select returns a new QuerySet[Category] for fetching column data.
func Select(cas ...pgtalk.ColumnAccessor) pgtalk.QuerySet[Category] {
	return pgtalk.MakeQuerySet[Category](tableAccess, cas)
}

// Insert creates a MutationSet for inserting data with zero or more columns.
func Insert(cas ...pgtalk.ColumnAccessor) pgtalk.MutationSet[Category] {
	return pgtalk.MakeMutationSet[Category](tableAccess, cas, pgtalk.MutationInsert)
}

// Delete creates a MutationSet for deleting data.
func Delete() pgtalk.MutationSet[Category] {
	return pgtalk.MakeMutationSet[Category](tableAccess, pgtalk.EmptyColumnAccessor, pgtalk.MutationDelete)
}

// Update creates a MutationSet to update zero or more columns.
func Update(cas ...pgtalk.ColumnAccessor) pgtalk.MutationSet[Category] {
	return pgtalk.MakeMutationSet[Category](tableAccess, cas, pgtalk.MutationUpdate)
}
