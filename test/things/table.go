package things
// generated by pgtalk-gen on Tue, 28 Dec 2021 12:13:24 CET 
// DO NOT EDIT

import (
	"database/sql"
	p "github.com/emicklei/pgtalk"
	"time"
	"github.com/jackc/pgtype"
)

// Thing is generated from the public.things table.
type Thing struct {
	ID	int64 // id : integer
	Tdate	sql.NullTime // tdate : date
	Ttimestamp	sql.NullTime // ttimestamp : timestamp without time zone
	Tjson	sql.NullString // tjson : jsonb
}

var (	
	// ID represents the column "id" of with type "integer", nullable:true, primary:true
	ID = p.NewInt64Access(p.MakeColumnInfo(tableInfo, "id", p.IsPrimary, p.NotNull, 1),
			func(dest interface{}, v int64) { dest.(*Thing).ID = v }, nil)	
	// Tdate represents the column "tdate" of with type "date", nullable:false, primary:false
	Tdate = p.NewTimeAccess(p.MakeColumnInfo(tableInfo, "tdate", p.NotPrimary, p.Nullable, 2),
			nil, func(dest interface{}, v sql.NullTime) { dest.(*Thing).Tdate = v })	
	// Ttimestamp represents the column "ttimestamp" of with type "timestamp without time zone", nullable:false, primary:false
	Ttimestamp = p.NewTimeAccess(p.MakeColumnInfo(tableInfo, "ttimestamp", p.NotPrimary, p.Nullable, 3),
			nil, func(dest interface{}, v sql.NullTime) { dest.(*Thing).Ttimestamp = v })	
	// Tjson represents the column "tjson" of with type "jsonb", nullable:false, primary:false
	Tjson = p.NewJSONBAccess(p.MakeColumnInfo(tableInfo, "tjson", p.NotPrimary, p.Nullable, 4),
			nil, func(dest interface{}, v sql.NullString) { dest.(*Thing).Tjson = v })
	// package private
	_ = time.Now
	_ = sql.Register // if no field is nullable
	_ = pgtype.Empty // for the occasional unused import from pgtype
	tableInfo = p.TableInfo{Schema: "public", Name: "things", Alias: "t1" }
)

func init() {
	// after var initialization (to prevent cycle) we need to update the tableInfo to set all columns
	tableInfo.Columns = []p.ColumnAccessor{ID,Tdate,Ttimestamp,Tjson, }
}

// SetID set the value to the field value and returns the receiver.
func (e *Thing) SetID(v int64) *Thing { e.ID = v ; return e }

// SetTdate set the address of the value to the field value and returns the receiver.
func (e *Thing) SetTdate(v sql.NullTime) *Thing { e.Tdate = v ; return e }

// SetTtimestamp set the address of the value to the field value and returns the receiver.
func (e *Thing) SetTtimestamp(v sql.NullTime) *Thing { e.Ttimestamp = v ; return e }

// SetTjson set the address of the value to the field value and returns the receiver.
func (e *Thing) SetTjson(v sql.NullString) *Thing { e.Tjson = v ; return e }

// Setters returns the list of changes to a Thing for which updates/inserts need to be processed.
// Can be used in Insert,Update,Select. Cannot be used to set null values for columns.
func (e *Thing) Setters() (list []p.ColumnAccessor) {
	if e.ID != 0 {
		list = append(list, ID.Set(e.ID))
	}
	if e.Tdate.Valid {
		list = append(list, Tdate.Set(e.Tdate.Time))
	}
	if e.Ttimestamp.Valid {
		list = append(list, Ttimestamp.Set(e.Ttimestamp.Time))
	}
	if e.Tjson.Valid {
		list = append(list, Tjson.Set(e.Tjson.String))
	}	
	return
}

// String returns the debug string for *Thing with all non-nil field values.
func (e *Thing) String() string {
	return p.StringWithFields(e, p.HideNilValues)
}

// AllColumns returns the list of all column accessors for usage in e.g. Select.
func AllColumns() []p.ColumnAccessor {
	return tableInfo.Columns
}

// Select returns a new QuerySet[Thing] for fetching column data.
func Select(cas ...p.ColumnAccessor) p.QuerySet[Thing] {
	return p.MakeQuerySet[Thing](tableInfo, cas)
}

// Insert creates a MutationSet for inserting data with zero or more columns.
func Insert(cas ...p.ColumnAccessor) p.MutationSet[Thing] {
	return p.MakeMutationSet[Thing](tableInfo, cas, p.MutationInsert)
}

// Delete creates a MutationSet for deleting data.
func Delete() p.MutationSet[Thing] {
	return p.MakeMutationSet[Thing](tableInfo, p.EmptyColumnAccessor, p.MutationDelete)
}

// Update creates a MutationSet to update zero or more columns.
func Update(cas ...p.ColumnAccessor) p.MutationSet[Thing] {
	return p.MakeMutationSet[Thing](tableInfo, cas, p.MutationUpdate)
}
